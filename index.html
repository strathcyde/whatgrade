<!DOCTYPE html>
<html lang = en>
<head>
    <title>What grade must I get?</title>
    <link rel = "icon" href = "calc.jpg" type = "image/jpg">
    <link rel = "stylesheet" href="styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>
<body>
<div class="pagewrapper">
    <p class='mainheading'>What Grade Must I Get?</p>
    <p class='subheadingLight'>This website calculates what grade you must get in your final assessment to achieve a desired overall class grade.</p1>

    <form id="forminputs">
        <div class="containerMAIN">
            <div class="sidebar" id="Desire&GetContainer">
                <div class="vbox" id="iddesiredBox">
                    <p class='subheadingBoldSmall'>Desired Overall Grade</p>
                    <p class='subheadingBoldSmall'>In percent. e.g. '60'.</p>
                    <input type="text" name="desired" placeholder="60">
                </div>
                <div class="vbox" id="idresultBox">
                <p class='subheadingBoldSmall'>You must get:</p>
                <div class="resultDiv" id="idresult"></div>
                <div class="resultDiv" id="idReqMarks"></div>
                </div>
            </div>
            <div class="containerHORIZONTAL" id="InfoContainer">
                <div class="box" id="idmarksOfFinalBox">
                    <p class='inputbox'>Marks abailable in final assessment, if known</p>
                    <input type="text" name="Marks">
                    <p class="inputbox">Weight of final assessment, in %</p>
                    <input type="text" name="WeightFinal">
                </div>
                <div class="box" id="idPartOne">
                    <p class='inputbox'>Grade in test 1, in %</p>
                    <input type="text" name="PartOne" placeholder="78">
                    <p class='inputbox'>Weight on course, in %</p>
                    <input type="text" name="WeightOne">
                </div>
                <div class="box" id="idPartTwo">
                    <p class='inputbox'>Grade in test 2, in %</p>
                    <input type="text" name="PartTwo">
                    <p class='inputbox'>Weight on course, in %</p>
                    <input type="text" name="WeightTwo">
                </div>
                <div class="box" id="idPartThree">
                    <p class='inputbox'>Grade in test 3, in %</p>
                    <input type="text" name="PartThree">
                    <p class='inputbox'>Weight on course, in %</p>
                    <input type="text" name="WeightThree">
                </div>
                <div class="box" id="idPartFour">
                    <p class='inputbox'>Grade in test 4, in %</p>
                    <input type="text" name="PartFour">
                    <p class='inputbox'>Weight on course, in %</p>
                    <input type="text" name="WeightFour">
                </div>
            </div>
        </div>
    </form>
</div>



<script>
    // const nameArray = ['desired','Marks','PartOne', 'PartTwo', 'PartThree', 'PartFour', 'WeightOne', 'WeightTwo', 'WeightThree', 'WeightFour'];

    const form = document.getElementById("forminputs");
    let result = '_ _ _ %'
    document.getElementById("idresult").innerText = result;
    // let desired = 0;
    // let Marks = 0;
    // let PartOne = 0;
    // let PartTwo = 0;
    // let PartThree = 0;
    // let PartFour = 0;

    // let WeightOne = 0;
    // let WeightTwo = 0;
    // let WeightThree = 0;
    // let WeightFour = 0;
    // let WeightFinal = 0;

    function updateResult(){
        
        let desired = eval((form.elements["desired"]).value.replace(/[^)(0-9+\-*/.]/g, ''));
        let Marks = eval((form.elements["Marks"]).value.replace(/[^)(0-9+\-*/.]/g, ''));

        let PartOne = eval((form.elements["PartOne"]).value.replace(/[^)(0-9+\-*/.]/g, ''));
        let PartTwo = eval((form.elements["PartTwo"]).value.replace(/[^)(0-9+\-*/.]/g, ''));
        let PartThree = eval((form.elements["PartThree"]).value.replace(/[^)(0-9+\-*/.]/g, ''));
        let PartFour = eval((form.elements["PartFour"]).value.replace(/[^)(0-9+\-*/.]/g, ''));

        let WeightOne = eval((form.elements["WeightOne"]).value.replace(/[^)(0-9+\-*/.]/g, ''));
        let WeightTwo = eval((form.elements["WeightTwo"]).value.replace(/[^)(0-9+\-*/.]/g, ''));
        let WeightThree = eval((form.elements["WeightThree"]).value.replace(/[^)(0-9+\-*/.]/g, ''));
        let WeightFour = eval((form.elements["WeightFour"]).value.replace(/[^)(0-9+\-*/.]/g, ''));
        let WeightFinal = eval((form.elements["WeightFinal"]).value.replace(/[^)(0-9+\-*/.]/g, ''));




        // /////////////// - BY GPT - /////////////// - BY GPT - /////////////// //
        // let desired = form.elements["desired"].value ? eval(form.elements["desired"].value.replace(/[^)(0-9+\-*/.]/g, '')) : 0;
        // let Marks = form.elements["Marks"].value ? eval(form.elements["Marks"].value.replace(/[^)(0-9+\-*/.]/g, '')) : 0;

        // let PartOne = form.elements["PartOne"].value ? eval(form.elements["PartOne"].value.replace(/[^)(0-9+\-*/.]/g, '')) : 0;
        // let PartTwo = form.elements["PartTwo"].value ? eval(form.elements["PartTwo"].value.replace(/[^)(0-9+\-*/.]/g, '')) : 0;
        // let PartThree = form.elements["PartThree"].value ? eval(form.elements["PartThree"].value.replace(/[^)(0-9+\-*/.]/g, '')) : 0;
        // let PartFour = form.elements["PartFour"].value ? eval(form.elements["PartFour"].value.replace(/[^)(0-9+\-*/.]/g, '')) : 0;

        // let WeightOne = form.elements["WeightOne"].value ? eval(form.elements["WeightOne"].value.replace(/[^)(0-9+\-*/.]/g, '')) : 0;
        // let WeightTwo = form.elements["WeightTwo"].value ? eval(form.elements["WeightTwo"].value.replace(/[^)(0-9+\-*/.]/g, '')) : 0;
        // let WeightThree = form.elements["WeightThree"].value ? eval(form.elements["WeightThree"].value.replace(/[^)(0-9+\-*/.]/g, '')) : 0;
        // let WeightFour = form.elements["WeightFour"].value ? eval(form.elements["WeightFour"].value.replace(/[^)(0-9+\-*/.]/g, '')) : 0;
        // let WeightFinal = form.elements["WeightFinal"].value ? eval(form.elements["WeightFinal"].value.replace(/[^)(0-9+\-*/.]/g, '')) : 0;



        if (isNaN(desired)){
            let result = 'Err: Please Enter Desired grade';
            document.getElementById("idresult").innerText = result;
        } else if (eval((WeightFinal ? WeightFinal : 0) + (WeightOne ? WeightOne : 0) + (WeightTwo ? WeightTwo : 0) + (WeightThree ? WeightThree : 0) + (WeightFour ? WeightFour : 0)) != 100){
            let result = 'Err: Please Check';
            document.getElementById("idresult").innerText = result;
            let ReqMarks = 'Weight Inputs'
            document.getElementById("idReqMarks").innerText = ReqMarks;
        } else {
            if (isNaN(PartFour) || isNaN(WeightFour)) {
                if (isNaN(PartThree) || isNaN(WeightThree)) {
                    if (isNaN(PartTwo) || isNaN(WeightTwo)) {
                        if (isNaN(PartOne) || isNaN(WeightOne)) {
                            let result = 'Check Inputs';
                            document.getElementById("idresult").innerText = result;
                            let ReqMarks = ''
                            document.getElementById("idReqMarks").innerText = ReqMarks;
                        } else {
                            let result = eval(((desired-((PartOne*WeightOne)/100))/WeightFinal)*100);
                            document.getElementById("idresult").innerText = Math.round(result*100)/100 + '%';
                            let ReqMarks = Math.ceil(result*Marks/100);
                            document.getElementById("idReqMarks").innerText = ' = ' + ReqMarks +' marks';
                        }
                    } else {
                        let result = eval(((desired-((PartOne*WeightOne+PartTwo*WeightTwo)/100))/WeightFinal)*100);
                        document.getElementById("idresult").innerText = Math.round(result*100)/100 + '%';
                        let ReqMarks = Math.ceil(result*Marks/100);
                        document.getElementById("idReqMarks").innerText = ' = ' + ReqMarks + ' marks';
                    }
                } else {
                    let result = eval(((desired-((PartOne*WeightOne+PartTwo*WeightTwo+PartThree*WeightThree)/100))/WeightFinal)*100);
                    document.getElementById("idresult").innerText = Math.round(result*100)/100 + '%';
                    let ReqMarks = Math.ceil(result*Marks/100);
                    document.getElementById("idReqMarks").innerText = ' = ' + ReqMarks + ' marks';
                }
            } else {
                let result = eval(((desired-((PartOne*WeightOne+PartTwo*WeightTwo+PartThree*WeightThree+PartFour*WeightFour)/100))/WeightFinal)*100);
                document.getElementById("idresult").innerText = Math.round(result*100)/100 + '%';
                let ReqMarks = Math.ceil(result*Marks/100);
                document.getElementById("idReqMarks").innerText = ' = ' + ReqMarks + ' marks';
            }
        }
    }

    form.addEventListener("input", updateResult);

</script>
</body>